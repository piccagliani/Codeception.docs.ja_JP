
<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Codeception.docs.ja : Codeception docs japanese translation">

    <link rel="stylesheet" type="text/css" media="screen" href="//piccagliani.github.io/Codeception.docs.ja_JP/stylesheets/stylesheet.css">

    <title>Codeception.docs.ja</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="https://github.com/piccagliani/Codeception.docs.ja_JP">View on GitHub</a>

        <h1 id="project_title">Codeception.docs.ja</h1>
        <h2 id="project_tagline">Codeception docs japanese translation</h2>

        <section id="downloads">
            <a class="zip_download_link" href="https://github.com/piccagliani/Codeception.docs.ja_JP/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/piccagliani/Codeception.docs.ja_JP/tarball/master">Download this project as a tar.gz file</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
        <h1>モジュールとヘルパー</h1>

<p>Codeceptionはすべてのテストスイートに快適なテスト環境を作成するために、モジュールを用いています。
モジュールは、あなたがテストで実行できるアクションとアサーションを選択することができます。</p>

<p>クラスのテスターオブジェクトで行われるすべてのアクションとアサーションはモジュールで定義されています。
これは一見、Codeceptionがあなたのテストに制限を掛けているように見えますがそうではありません。
カスタムモジュールに自分自身のアクションやアサーションを書き込むことによって、テストスイートを拡張することができるのです。</p>

<p>以下のテストを見てみて下さい。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$I</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FunctionalTester</span><span class="p">(</span><span class="nv">$scenario</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">amOnPage</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">see</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seeInDatabase</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">));</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seeFileFound</span><span class="p">(</span><span class="s1">&#39;running.lock&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>これは異なるエンティティで動作します。ウェブページはPhpBrowserモジュールをロードすることができ、データベースのアサーションはDbモジュールを使用し、ファイルの状態はFilesystemモジュールで確認することができます。</p>

<p>モジュールはスイートの設定でアクタークラスに取り付けられています。例えば<code>tests/functional.suite.yml</code>では次のようになっています。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">class_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">FunctionalTester</span>
<span class="l-Scalar-Plain">modules</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">PhpBrowser</span><span class="p-Indicator">,</span> <span class="nv">Db</span><span class="p-Indicator">,</span> <span class="nv">Filesystem</span><span class="p-Indicator">]</span>
</code></pre></div>
<p>FunctionalTesterクラスはモジュールに定義されているメソッドを持っています。実際にはそれらは含まれておらず、プロキシのように動作しています。どのモジュールがそのアクションを実行するのか知っており、その中にパラメータを渡すのです。お使いのIDEがFunctionalTesterの持っているすべてのメソッドを見るには<code>build</code>コマンドを使います。対応するモジュールからの署名をコピーしてFunctionalTesterクラスの定義を生成します。</p>

<h2>スタンダードモジュール</h2>

<p>Codeceptionには異なる目的や環境のためのテストを実行するのに役立つバンドルされたモジュールが多くあります。
多くのモジュールは一定ではありません - 多くのフレームワークやORMがサポートされているように成長していくべきです。
Modulesセクションのメインメニュー下にリストがあるので確認してみてください。</p>

<p>これらのモジュールはすべてドキュメント化されています。詳細なリファレンスは<a href="https://github.com/Codeception/Codeception/tree/master/docs/modules">GitHub</a>で確認できます。</p>

<h2>ヘルパー</h2>

<p>Codeceptionはメインリポジトリからのみのモジュールに制限されているわけではありません。あなたのプロジェクトは独自のアクションをテストスイートに間違いなく追加する必要があるでしょう。<code>bootstrap</code>を実行すると、Codeceptionは新しく作られた3つのスイートそれぞれにダミーモジュールを生成します。これらのカスタムモジュールは&#39;ヘルパー&#39;と呼ばれ、<code>tests/_support</code>ディレクトリ内に置かれています。</p>

<p>欠けているアクションやアサーションのコマンドをヘルパーに定義することは良いアイディアです。</p>

<p>ノート: ヘルパークラスの名前は&quot;*Helper.php&quot;で終わらなければなりません。</p>

<p>例えば、FunctionalHelperクラスを拡張するとします。これはデフォルトでは、FunctionalTesterクラスと機能テストスイートにリンクされています。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Codeception\Module</span><span class="p">;</span>
<span class="c1">// here you can define custom functions for FunctionalTester</span>

<span class="k">class</span> <span class="nc">FunctionalHelper</span> <span class="k">extends</span> <span class="nx">\Codeception\Module</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>アクションに関して言えば、すべてが非常にシンプルです。あなたが定義するすべてのアクションはpublic functionです。publicメソッドを書き、<code>build</code>コマンドを実行すれば、FunctionalTesterクラスに新しい関数が追加されたことを確認できます。</p>

<p>ノート: publicメソッドが<code>_</code>から始まる場合は隠され、アクタークラスには追加されません。</p>

<p>アサーションは少し注意が必要です。まず始めに、すべてのアサーションの接頭語が <code>see</code> もしくは <code>dontSee</code> になっていることを推奨します。</p>

<p>例えばこのようになります。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seePageReloaded</span><span class="p">();</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seeClassIsLoaded</span><span class="p">(</span><span class="nv">$classname</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">dontSeeUserExist</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>これをテストで使用します。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$I</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FunctionalTester</span><span class="p">(</span><span class="nv">$scenario</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seePageReloaded</span><span class="p">();</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">seeClassIsLoaded</span><span class="p">(</span><span class="s1">&#39;FunctionalTester&#39;</span><span class="p">);</span>
<span class="nv">$I</span><span class="o">-&gt;</span><span class="na">dontSeeUserExist</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>モジュール内のassertXXXメソッドを使ってアサーションを定義することができます。すべてのPHPUnitのアサートメソッドがモジュールに含まれているのではありませんが、<code>PHPUnit_Framework_Assert</code>クラスにあるPHPUnitの静的メソッドを活用することもできます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">seeClassExist</span><span class="p">(</span><span class="nv">$class</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="nv">$class</span><span class="p">));</span>
    <span class="c1">// or</span>
    <span class="nx">\PHPUnit_Framework_Assert</span><span class="o">::</span><span class="na">assertTrue</span><span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="nv">$class</span><span class="p">));</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>ヘルパー内でこれらのアサーションを使うことができます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">seeCanCheckEverything</span><span class="p">(</span><span class="nv">$thing</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$thing</span><span class="p">),</span> <span class="s2">&quot;this thing is set&quot;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertFalse</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$any</span><span class="p">),</span> <span class="s2">&quot;this thing is not empty&quot;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotNull</span><span class="p">(</span><span class="nv">$thing</span><span class="p">,</span> <span class="s2">&quot;this thing is not null&quot;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertContains</span><span class="p">(</span><span class="s2">&quot;world&quot;</span><span class="p">,</span> <span class="nv">$thing</span><span class="p">,</span> <span class="s2">&quot;this thing contains &#39;world&#39;&quot;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotContains</span><span class="p">(</span><span class="s2">&quot;bye&quot;</span><span class="p">,</span> <span class="nv">$thing</span><span class="p">,</span> <span class="s2">&quot;this thing doesn`t contain &#39;bye&#39;&quot;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">,</span> <span class="nv">$thing</span><span class="p">,</span> <span class="s2">&quot;this thing is &#39;Hello world&#39;!&quot;</span><span class="p">);</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>$this-&gt;assert</code>とタイプすればすべて見ることができます。</p>

<h3>衝突の解決</h3>

<p>もし同じ名前のアクションを含む2つのモジュールがあった場合どうなるでしょう？Codeceptionではモジュールの順序を変更することで
アクションがオーバーライドされます。2つ目のモジュールのアクションがロードされ、1つ目のモジュールのアクションは無視されます。
モジュールの順序はスイートの設定で定義できます。</p>

<h3>モジュールの接続</h3>

<p>他のモジュールから内部データや関数にアクセスすることも可能です。例えば、あなたのモジュールはDoctrineからの接続、もしくはSymfonyからウェブブラウザが必要になることがあります。</p>

<p>モジュールは<code>getModule</code>メソッドを通じて相互に作用できます。このメソッドは必要なモジュールがロードされていない場合、例外を投げることを覚えておいてください。</p>

<p>データベースに再接続するモジュールを書いていると想定してみましょう。Dbモジュールからdbh接続値を使用するようになっています。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">reconnectToDatabase</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$dbh</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getModule</span><span class="p">(</span><span class="s1">&#39;Db&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">dbh</span><span class="p">;</span>
    <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
    <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>getModule</code>関数を使うと、リクエストしたモジュール内のすべてのpublicメソッドやプロパティにアクセスできます。dbhプロパティは他のモジュールで利用できるよう、publicとして定義されています。</p>

<p>これは他のモジュールからアクションのシーケンスを実行する必要がある場合に役立ちます。</p>

<p>例:</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">seeConfigFilesCreated</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$filesystem</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getModule</span><span class="p">(</span><span class="s1">&#39;Filesystem&#39;</span><span class="p">);</span>
    <span class="nv">$filesystem</span><span class="o">-&gt;</span><span class="na">seeFileFound</span><span class="p">(</span><span class="s1">&#39;codeception.yml&#39;</span><span class="p">);</span>
    <span class="nv">$filesystem</span><span class="o">-&gt;</span><span class="na">openFile</span><span class="p">(</span><span class="s1">&#39;codeception.yml&#39;</span><span class="p">);</span>
    <span class="nv">$filesystem</span><span class="o">-&gt;</span><span class="na">seeInFile</span><span class="p">(</span><span class="s1">&#39;paths&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<h3>フック(Hooks)</h3>

<p>各モジュールは、実行中のテストからのイベントを処理することができます。モジュールはテスト前に実行させることもできますし、テストが終了してからでも実行できます。これはブートストラップやクリーンアップをする際に役立ちます。また、テストが失敗した時のために特殊な動作を定義することも可能です。これは問題をデバッグする際に便利です。</p>

<p>例えば、PhpBrowserモジュールはテストが失敗した時、<code>tests/_output</code>ディレクトリに現在のウェブページを保存します。</p>

<p>すべてのフックは<code>\Codeception\Module</code>で定義されており、ここにリストされています。あなたは自由にそれをあなたのモジュールで再定義することができます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

    <span class="c1">// HOOK: used after configuration is loaded</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_initialize</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: on every Actor class initialization</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_cleanup</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: before each suite</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_beforeSuite</span><span class="p">(</span><span class="nv">$settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: after suite</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_afterSuite</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: before each step</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_beforeStep</span><span class="p">(</span><span class="nx">\Codeception\Step</span> <span class="nv">$step</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: after each step</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_afterStep</span><span class="p">(</span><span class="nx">\Codeception\Step</span> <span class="nv">$step</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: before test</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_before</span><span class="p">(</span><span class="nx">\Codeception\TestCase</span> <span class="nv">$test</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: after test</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_after</span><span class="p">(</span><span class="nx">\Codeception\TestCase</span> <span class="nv">$test</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="c1">// HOOK: on fail</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_failed</span><span class="p">(</span><span class="nx">\Codeception\TestCase</span> <span class="nv">$test</span><span class="p">,</span> <span class="nv">$fail</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>_</code>から始まるメソッドはアクタークラスに追加されないことに注意して下さい。
これらはpublicとして定義されますが、内部的な目的でのみ使用されます。</p>

<h3>デバッグ</h3>

<p>先述したように、<code>_failed</code>フックはテストが失敗した際のデバッグに役立ちます。現在のテストの状態を保存し、それをユーザに見せることができますが、これだけではありません。</p>

<p>各モジュールは、デバッグ中に有用的であると思われる内部の値を出力することができます。
例えばPhpBrowserモジュールは、新しいページに移動するたびにレスポンスコードと現在のURLを出力します。
このように、モジュールはブラックボックスではありません。彼らはテスト中に何が起きているのかを見せようとしているのです。あなたがテストをデバッグする際の苦痛を減らしてくれるのです。</p>

<p>追加の情報を表示するには、モジュールの<code>debug</code> と <code>debugSection</code>メソッドを使用します。
PhpBrowserでどのように動作するか、例を見てみましょう。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debugSection</span><span class="p">(</span><span class="s1">&#39;Request&#39;</span><span class="p">,</span> <span class="nv">$params</span><span class="p">));</span>
    <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">(</span><span class="s1">&#39;Response Code: &#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">client</span><span class="o">-&gt;</span><span class="na">getStatusCode</span><span class="p">());</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>PhpBrowserをデバッグモードで実行しているこのテストは、以下のような出力を行います。</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">I click <span class="s2">&quot;All pages&quot;</span>
* Request <span class="o">(</span>GET<span class="o">)</span> http://localhost/pages <span class="o">{}</span>
* Response code: 200
</code></pre></div>
<h3>設定</h3>

<p>モジュールはスイートの設定ファイル、もしくはグローバルな<code>codeception.yml</code>で設定することができます。
必須のパラメータはモジュールクラスの<code>$requiredFields</code>プロパティで定義する必要があります。Dbモジュールでの例を見てみましょう。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">Db</span> <span class="k">extends</span> <span class="nx">\Codeception\Module</span> <span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$requiredFields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>次回、あなたがこれらの値を設定せずにスイートを開始した場合、例外が投げられます。</p>

<p>オプションのパラメータでは、デフォルト値を設定する必要があります。<code>$config</code>プロパティはオプションのパラメータと同様に、それらの値を定義するために使用されます。</p>

<p>WebDriverモジュールでは、Seleniumのデフォルトのサーバーアドレスとポートを使用しています。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">WebDriver</span> <span class="k">extends</span> <span class="nx">\Codeception\Module</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$requiredFields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;browser&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">);</span>
    <span class="k">protected</span> <span class="nv">$config</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;4444&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>ホストとポートのパラメータはスイートの設定で再定義できます。
それらの値は設定ファイルの<code>modules:config</code>セクションにあります。</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">modules</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">WebDriver</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Db</span>
    <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">WebDriver</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&#39;http://mysite.com/&#39;</span>
            <span class="l-Scalar-Plain">browser</span><span class="p-Indicator">:</span> <span class="s">&#39;firefox&#39;</span>
        <span class="l-Scalar-Plain">Db</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">cleanup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
            <span class="l-Scalar-Plain">repopulate</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</code></pre></div>
<p>オプションと必須のパラメータは<code>$config</code>プロパティからアクセスすることができます。その値を取得するには、<code>$this-&gt;config[&#39;parameter&#39;]</code>を使ってください。</p>

<h3>ダイナミックな設定(Dynamic Configuration)</h3>

<p>もしあなたが実行時にモジュールを再設定したければ、モジュールの<code>_reconfigure</code>メソッドを使用してください。
それをヘルパークラスから呼び出し、変更したいすべてのフィールドに渡すことができます。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getModule</span><span class="p">(</span><span class="s1">&#39;WebDriver&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">_reconfigure</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;browser&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;chrome&#39;</span><span class="p">));</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>テスト終了後、設定はオリジナルの値に戻されます。</p>

<h3>追加オプション(Additional options)</h3>

<p>各クラスのように、ヘルパーはモジュールから継承することが可能です。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Codeception\Module</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">MySeleniumHelper</span> <span class="k">extends</span> <span class="nx">\Codeception\Module\WebDriver</span>  <span class="p">{</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>継承されたヘルパーでは、あなた自身によって実装されているメソッドを書き換えて下さい。
あなたがテストセッションの開始と終了をカスタマイズする際のオプションである<code>_before</code> と <code>_after</code>フックも置き換えることができます。</p>

<p>親クラスのメソッドが子クラスで使用すべきでない場合、それらを無効にすることができます。Codeceptionにはいくつかのオプションがあります。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Codeception\Module</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">MySeleniumHelper</span> <span class="k">extends</span> <span class="nx">\Codeception\Module\WebDriver</span>
<span class="p">{</span>
    <span class="c1">// disable all inherited actions</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$includeInheritedActions</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

    <span class="c1">// include only &quot;see&quot; and &quot;click&quot; actions</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$onlyActions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;see&#39;</span><span class="p">,</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>

    <span class="c1">// exclude &quot;seeElement&quot; action</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$excludeActions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;seeElement&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>$includeInheritedActions</code>をfalseに設定することで、親メソッドのエイリアスを作成する機能を追加します。
これはモジュール間の衝突を解決します。<code>Db</code>モジュールと、それを継承した私たちの<code>SecondDbHelper</code>モジュールを使うとします。
その際、両方のモジュールにある<code>seeInDatabase</code>メソッドをどのように使用するのでしょうか？以下を見てみてください。</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Codeception\Module</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">SecondDbHelper</span> <span class="k">extends</span> <span class="nx">Db</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="nv">$includeInheritedActions</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">seeInSecondDb</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">seeInDatabase</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p><code>$includeInheritedActions</code>をfalseに設定することで、生成されたアクターに親クラスのメソッドを含まないのです。
ヘルパークラスでは継承したメソッドを、引き続き使用することが可能です。</p>

<h2>結論</h2>

<p>モジュールはCodeceptionの真の力です。これらはアクタークラス（UnitTester、FunctionalTester、AcceptanceTesterなど）への複数の継承をエミュレートするために使用されます。Codeceptionはウェブリクエスト、アクセスデータ、人気PHPライブラリとのインタラクション等をエミュレートするモジュールを提供しています。あなたのアプリケーションは、カスタムされたアクションが必要になるでしょう。これらはヘルパークラスで定義することができます。もしあなたが他の人にも役立ちそうなモジュールを書いたのでしたら、ぜひシェアしてください。Codeceptionリポジトリをフォークし、モジュールを<strong>src/Codeception/Module</strong>ディレクトリ内に設置し、プルリクエストを送信して下さい。</p>

    </section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">Codeception.docs.ja maintained by <a href="https://github.com/piccagliani">piccagliani</a></p>
        <p>Last updated: 2015-02-23 15:02:04 +0900, Based on <a href="https://github.com/Codeception/Codeception/tree/2.0">Codeception</a>@4e267293bb</p>
        <div id="contributors"></div>
    </footer>
</div>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-59804278-1");
        pageTracker._trackPageview();
    } catch(err) {}
</script>
<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="//piccagliani.github.io/Codeception.docs.ja_JP/javascripts/contributors.js"></script>

</body>
</html>
